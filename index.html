<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulateur de Capacit√© d'Emprunt</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Simulateur de Capacit√© d'Emprunt</h1>
            <div class="actions">
                <button id="run-simulation">üöÄ Simuler</button>
                <button id="save-client">üíæ Enregistrer</button>
                <label for="load-client-input" class="button">üì§ Charger</label>
                <input type="file" id="load-client-input" accept=".json" style="display: none;">
            </div>
        </header>

        <main>
            <div class="input-grid">
                <div class="card">
                    <h2>Revenus Mensuels (‚Ç¨)</h2>
                    <div class="input-group">
                        <label for="salaire">Salaire net</label>
                        <input type="number" id="salaire" value="3000">
                    </div>
                    <div class="input-group">
                        <label for="immobilier">Revenus immobiliers</label>
                        <input type="number" id="immobilier" value="0">
                    </div>
                     <div class="input-group">
                        <label for="pct_immobilier">Dont (%)</label>
                        <input type="number" id="pct_immobilier" value="100" step="0.01" min="0" max="100">
                    </div>
                     <div class="input-group">
                        <label for="financier">Revenus financiers</label>
                        <input type="number" id="financier" value="0">
                    </div>
                     <div class="input-group">
                        <label for="pct_financier">Dont (%)</label>
                        <input type="number" id="pct_financier" value="100" step="0.01" min="0" max="100">
                    </div>
                </div>

                <div class="card">
                    <h2>Charges Mensuelles (‚Ç¨)</h2>
                    <div class="input-group">
                        <label for="conso">Cr√©dits √† la consommation</label>
                        <input type="number" id="conso" value="0">
                    </div>
                    <div class="input-group">
                        <label for="immobilier_credit">Cr√©dit immobilier</label>
                        <input type="number" id="immobilier_credit" value="0">
                    </div>
                    <div class="input-group">
                        <label for="leasing">Leasing / LOA</label>
                        <input type="number" id="leasing" value="0">
                    </div>
                </div>

                <div class="card">
                    <h2>Param√®tres du Projet</h2>
                     <div class="input-group">
                        <label for="liquidites">Apport / Liquidit√©s (‚Ç¨)</label>
                        <input type="number" id="liquidites" value="20000">
                    </div>
                    <div class="input-group">
                        <label for="duree">Dur√©e du pr√™t (ann√©es)</label>
                        <input type="number" id="duree" value="25">
                    </div>
                    <div class="input-group">
                        <label for="taux_interet">Taux d'int√©r√™t du pr√™t (%)</label>
                        <input type="number" id="taux_interet" value="3.5" step="0.01">
                    </div>
                     <div class="input-group">
                        <label for="taux_assurance">Taux d'assurance (%)</label>
                        <input type="number" id="taux_assurance" value="0.35" step="0.01">
                    </div>
                </div>
                
                <div class="card">
                    <h2>Param√®tres Avanc√©s</h2>
                     <div class="input-group">
                        <label for="rfr_n2">RFR N-2 (‚Ç¨)</label>
                        <input type="number" id="rfr_n2" value="30000">
                    </div>
                     <div class="input-group">
                        <label for="parts_fiscales">Nombre de parts fiscales</label>
                        <input type="number" id="parts_fiscales" value="2" step="0.5">
                    </div>
                    <div class="input-group">
                        <label for="nb_personnes">Nombre de personnes</label>
                        <input type="number" id="nb_personnes" value="2">
                    </div>
                    <div class="input-group">
                        <label for="departement">D√©partement</label>
                        <select id="departement"></select>
                    </div>
                    <div class="input-group">
                        <label for="commune">Commune</label>
                        <select id="commune"></select>
                    </div>
                     <div class="input-group">
                        <label for="taux_endettement">Taux d'endettement max (%)</label>
                        <input type="number" id="taux_endettement" value="35">
                    </div>
                </div>

                <div class="card">
                    <h2>Type de Bien</h2>
                    <div class="radio-group" id="property-type-radios">
                        <label><input type="radio" name="property_type" value="neuf" checked> Neuf</label>
                        <label><input type="radio" name="property_type" value="recent"> R√©cent < 5 ans</label>
                        <label><input type="radio" name="property_type" value="ancien"> Ancien > 5 ans</label>
                    </div>

                    <div id="new-build-options" style="display:none;">
                        <h3>Options Neuf</h3>
                        <div class="radio-group">
                            <label><input type="radio" name="type_bien" value="appartement" checked> Appartement</label>
                            <label><input type="radio" name="type_bien" value="maison"> Maison</label>
                        </div>
                        <div id="notary-options" class="radio-group">
                            <label><input type="radio" name="notary_type" value="none" checked> Pas de frais r√©duits</label>
                            <label><input type="radio" name="notary_type" value="reduced"> Frais r√©duits (2.5%)</label>
                        </div>
                        <div class="checkbox-group">
                            <label id="tva-reduite-label"><input type="checkbox" id="tva_reduite"> TVA r√©duite</label>
                        </div>
                    </div>

                    <div id="old-build-options" style="display:none;">
                        <h3>Options Ancien</h3>
                        <div class="checkbox-group">
                            <label><input type="checkbox" id="has_works"> Avec travaux</label>
                        </div>
                        <div id="work-cost-group" class="input-group" style="display:none;">
                            <label for="work_cost">Co√ªt des travaux (‚Ç¨)</label>
                            <input type="number" id="work_cost" value="0">
                        </div>
                    </div>
                </div>
            </div>

            <div class="results-section">
                <h2>R√©sultats de la Simulation</h2>
                <div id="results-container">
                    <p class="placeholder">Cliquez sur "Simuler" pour voir les r√©sultats.</p>
                </div>
            </div>
            
            <div class="graph-section">
                <h2>Graphique Comparatif</h2>
                <div class="chart-container">
                     <canvas id="results-chart"></canvas>
                </div>
            </div>
        </main>
    </div>
    <script src="script.js"></script>
</body>
</html>